deploymentMode: SimpleScalable
loki:
  auth_enabled: false
  server:
    log_level: debug
  schemaConfig:
    configs:
      - from: "2024-04-01"
        store: tsdb
        object_store: s3
        schema: v13
        index:
          prefix: loki_index_
          period: 24h
  storage:
    type: s3
    bucketNames:
      chunks: ceph-chunks
      ruler: ceph-ruler
      admin: ceph-admin
    s3:
      bucket: ENC[AES256_GCM,data:2eId3xhYwaWYhiU=,iv:vyc4pxKj3g9hPQXZaIPLbng3EUtHF41FBYW4Qpe9/7A=,tag:T3TphrBB7YCsGBo8mcKp8g==,type:str]
      region: ENC[AES256_GCM,data:866GF0Z29xeN,iv:vCMl84k/9WUn5uxY/NDKGd1ipR82QQw6BROKU2lpScw=,tag:Pj9EUw4y7DxKCaSKHBq1ng==,type:str]
      endpoint: ENC[AES256_GCM,data:qS635+3Z6J2XPNYUMWCSN7mysHNca3B3z3iwn/BfxBNpBGqhPmoc2mXQmsS09WNGH/XMd1RM+3nt2AOBLxyymAY=,iv:QYluBCuyz97AaVxD3uwCQ1NGvZ+R5AJ9JLj7nbWIpFo=,tag:5txcsLBsu8hT62PvpxK4Kg==,type:str]
      access_key_id: ENC[AES256_GCM,data:Mb5QSleK5n/YRPA7z2tRp5N79nI=,iv:DVAJhFA1UYFuRkKsPSx7YB/HwjWlHyEzxLucAneIYNQ=,tag:9LceRNSuENfqT4C5dgubgA==,type:str]
      secret_access_key: ENC[AES256_GCM,data:8bMOlv8PYCorDwlNW7D4ihbSV+Z3IHdReUH+p+ezPlf2enjLhP9B3A==,iv:SLwXU3EPgpkcjsDk8EuEtrlw8HGhTn9Ti8sq0trPTu0=,tag:L6sJCGwPX1wHNYas+GUfKg==,type:str]
      signature_version: ENC[AES256_GCM,data:+Fo=,iv:nH2ZqGGA9Y7oKeObfQwo3ua9aEX/iFLnmH3bl3LU+l8=,tag:hRTUP90Qx9MSgzyieYRQmw==,type:str]
      s3forcepathstyle: ENC[AES256_GCM,data:WgXr/w==,iv:MeCvNVyaAOPcQ9lnie+nkwwM1ARTKX2tMmDm5ywWkDU=,tag:xpIqmLnIYKBnPMSYbXeIkw==,type:bool]
      insecure: ENC[AES256_GCM,data:OfapxA==,iv:Z9Q7IIk4hLrA9V8jJqANkj7qr6eqi/7EmSrDFMgWkY4=,tag:4iZiljawDboAIFjNdtVE3w==,type:bool]
      http_config: {}
  limits_config:
    # Add retention period
    retention_period: 720h
    # Consider other limits
    max_query_parallelism: 128
    max_query_length: 721h
    max_streams_per_user: 10000
  ingester:
    chunk_encoding: snappy
  querier:
    max_concurrent: 4
  compactor:
    working_directory: /var/loki/compactor
    compaction_interval: 10m
    retention_enabled: true
    retention_delete_delay: 2h
    delete_request_store: s3
  query_scheduler:
    max_outstanding_requests_per_tenant: 4096
  table_manager:
    poll_interval: 2m
    creation_grace_period: 10m
    cache_table_names: true
ingester:
  lifecycler:
    ring:
      replication_factor: 3
compactor:
  persistence:
    enabled: true
    mountPath: /var/loki/compactor
    accessModes:
      - ENC[AES256_GCM,data:5nlr2uE/gpqA6REHDg==,iv:yJjnj2Zwt4doVgQ9nm1JbxKdZeJ5+wJ1QoXMGSomcME=,tag:W1go7R7/0CSKg6/5/OI1vg==,type:str]
    size: 20Gi
    storageClass: ceph-block
lokiCanary:
  enabled: true
backend:
  replicas: 2
read:
  replicas: 2
write:
  replicas: 3
minio:
  enabled: false
gateway:
  auth:
    enabled: false
  service:
    type: LoadBalancer
tracing:
  enabled: true
sops:
  age:
    - recipient: age18ynkp4xzwas6la23fvs5zhxazvqf7p3qw4vv26a346e8340gegfqh9c87h
      enc: |
        -----BEGIN AGE ENCRYPTED FILE-----
        YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBJdUtNOXRIalFvcFNIbTBP
        VC9HMzNZbDZjSkZnbmY3cHpxSWkyTk4zU0VFCjUvdktvaEsvc082cjRROWMzVEFE
        NHdwWnFCaE12Rk50TWR4L0owbmZLZDQKLS0tIFZxcEY5K1VtUURlUXRCMVpLcDBN
        QTM4Ly9kM09SUk9FcUFSenVPRm1zYk0KF/ReS2BkqE527B+oh50aMGZixFr6ySbK
        tAMuiJ2CnzdPmCaS7nMHg55/jmHNY6g/6kmka2L14bcbD9RAahHokQ==
        -----END AGE ENCRYPTED FILE-----
  lastmodified: "2025-05-17T22:48:06Z"
  mac: ENC[AES256_GCM,data:Chh5OZquQ9qvN+TPTa40teqIWxLazRX3qAzz6jLt702xt7ppjcOX6JbNkyfCTEPwFfen/ZNcHl6HufgL9Eh2jPsc3K9g7cMh7LcDPAJmqFajWMHXVJWDKk+zebVEBiA2hGuBlFrRKm413HND7FA2yFkHWsKiGp5CLIGFmR83Nis=,iv:/SpRtOfH66inFzIJ3NtHI5mE7X2O63SQZoAILGuYWlE=,tag:PICRMV0iCb6HpFtM+CBBxw==,type:str]
  encrypted_regex: ^(data|stringData|.*[Ss]ecret.*|.*[Kk]ey.*|.*[Pp]assword.*|.*[Tt]oken.*|.*access.*|s3.*)$
  mac_only_encrypted: true
  version: 3.10.2
