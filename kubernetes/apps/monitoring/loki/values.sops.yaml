loki:
  server:
    log_level: debug
  schemaConfig:
    configs:
      - from: "2024-04-01"
        store: tsdb
        object_store: s3
        schema: v13
        index:
          prefix: loki_index_
          period: 24h
  storage:
    type: s3
    bucketNames:
      chunks: ceph-chunks
      ruler: ceph-ruler
      admin: ceph-admin
    s3:
      bucket: ENC[AES256_GCM,data:LDytAouDvPTMV9w=,iv:9YfPHRcH0lGDBNeUp+WuYP7sQbWKcEZnqn965u1Zk5o=,tag:IEP2NSY60p7w+/jRNW4IvA==,type:str]
      region: ENC[AES256_GCM,data:BKSDT2UHYj4p,iv:ZUbywthtREgEs7OkFjWD5T/Yn4QhTchvDAqswjsXOQ0=,tag:9aOO6qBdkwe1mC8QXd6mCg==,type:str]
      endpoint: ENC[AES256_GCM,data:rLtZMI2OEiW+wGc0fHa6lV7w469+pyJeXHMDXvOrLBpzzKHWnGq7O7S2Y/DznPCLgeCeUKWRHjWfCzEnkTR4JKc=,iv:q/VdFz/YB9PV8pVNX8K4Rtr3FxoHihfCqkorr0jUS3c=,tag:sRSc03HZO5gED6B2FqA2lQ==,type:str]
      access_key_id: ENC[AES256_GCM,data:e5D2LE1ZbKT/xduOMC7srRXicz0=,iv:08YGafBzpD4svtgrFGxksI6Cw4tufWguvEFbYW8spC8=,tag:CEiToWMZQPykb4o0FSUbfw==,type:str]
      secret_access_key: ENC[AES256_GCM,data:yIiSduC4ddGXkZHf7mUnmTchk2cR3eQ/sOl3/aDLEGwNXrx3xynCnw==,iv:AFSuqVere8Tggk2Ll+guTPVI01YFygUxnBfvoEbm9TA=,tag:GqP1Ustk7aqhZG0DPlycnw==,type:str]
      signature_version: ENC[AES256_GCM,data:eq8=,iv:bVnseBM77Aozw8wPV+GBERUqvGx8piJYf5qWtu9aKhw=,tag:63yH3we2mpGB6Ag7Xe4F/w==,type:str]
      s3forcepathstyle: ENC[AES256_GCM,data:4gwTRw==,iv:IwoC6QrlshUnaqed0Nhb9zSbPWmtZ79jk/K/5+Xy3vM=,tag:UvRRy+zyl3nAOS5aciJJAQ==,type:bool]
      insecure: ENC[AES256_GCM,data:61JXfw==,iv:TzcU5Xk2QjXo6HfqWTHwoxZtl3fLYMuAogKBhdJjhvM=,tag:ac6e1fYZ6zc6+4FuUO2UVA==,type:bool]
      http_config: {}
  limits_config:
    # Add retention period
    retention_period: 720h
    # Consider other limits
    max_query_parallelism: 128
    max_query_length: 721h
    max_streams_per_user: 10000
  ingester:
    chunk_encoding: snappy
  querier:
    max_concurrent: 4
  compactor:
    working_directory: /var/loki/compactor
    compaction_interval: 10m
    retention_enabled: true
    retention_delete_delay: 2h
    delete_request_store: s3
  query_scheduler:
    max_outstanding_requests_per_tenant: 4096
  table_manager:
    poll_interval: 2m
    creation_grace_period: 10m
    cache_table_names: true
ingester:
  lifecycler:
    ring:
      replication_factor: 3
compactor:
  persistence:
    enabled: true
    mountPath: /var/loki/compactor
    accessModes:
      - ENC[AES256_GCM,data:Zk36EfA4df54e5ozYQ==,iv:5eMlgBnnqw5uCr1groAKyJPXGnlZ2Lp2aoVU3qdopes=,tag:Yc1+pUqEYCir+NOGdz3wQw==,type:str]
    size: 20Gi
    storageClass: ceph-block
deploymentMode: SimpleScalable
lokiCanary:
  enabled: true
backend:
  replicas: 2
read:
  replicas: 2
write:
  replicas: 3
minio:
  enabled: false
gateway:
  auth:
    enabled: false
  service:
    type: LoadBalancer
tracing:
  enabled: true
sops:
  age:
    - recipient: age18ynkp4xzwas6la23fvs5zhxazvqf7p3qw4vv26a346e8340gegfqh9c87h
      enc: |
        -----BEGIN AGE ENCRYPTED FILE-----
        YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBXWWlXREpXMUwvaHJEdkk5
        ZEp0SHZnVzZuRTBYNjZOR2hBQlI3YW5ldjEwCmhsUVFZck9ySnp5NDJVM3RPVTZK
        cDFsRmMyWmJPdWo1NHVOdDV1eVhVcTQKLS0tIEl6aWc2VTEwMktuMDhJeTkxNFdn
        K3p0VUtzY1Jid1RFaGdybEdPT1JMcDgK+CCsQA4LzR/flw9Z6X4MyrCpV3Avrdty
        OutugYZ+EemjkjPcIBXjM6n9xydn/qLoLOSKiZ9byPH2wtTNvBZfKw==
        -----END AGE ENCRYPTED FILE-----
  lastmodified: "2025-05-17T22:13:55Z"
  mac: ENC[AES256_GCM,data:lcaJcUqspvxvY0GcGfekTFP3/6/8o35sUmU89io9/sC8ItNBS65I/WKgSenIcQVV7yMEC2fvHpcymrHgH+8s/dILRjbQRq+qAIS7AA3Y5I3Xp9k+4XFD3Hf9HpnHSS3BPZnpVghx43xu15FwhZ1Xeih0oMrqOD2oedO/G4yGyek=,iv:5LtEaT571kbZiDy31qeKlh2UF8VqQA2Bl+qEXCehFpQ=,tag:urLWNWd45u00cMwxZVlnHg==,type:str]
  encrypted_regex: ^(data|stringData|.*[Ss]ecret.*|.*[Kk]ey.*|.*[Pp]assword.*|.*[Tt]oken.*|.*access.*|s3.*)$
  mac_only_encrypted: true
  version: 3.10.2
