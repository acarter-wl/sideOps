loki:
    auth_enabled: false
    schemaConfig:
        configs:
            - from: "2024-04-01"
              store: tsdb
              object_store: s3
              schema: v13
              index:
                prefix: loki_index_
                period: 24h
    storage:
        type: s3
        bucketNames:
            chunks: ceph-chunks
            ruler: ceph-ruler
            admin: ceph-admin
        s3:
            endpoint: ENC[AES256_GCM,data:+RBCM6Aw74y9arx11GjIQ/5P6GlrYyqcgAmnHI8LqmVlHGYTMK0SXc+cFC8Stg0XeL2Xki2Jy1YlU7uTGofDI+M=,iv:3PEdLEgsTWTC4d9PLzB/aZPPDg/eye7fl2up8RLjOvM=,tag:RkfGNOW1qRiJfRg+f2FXtg==,type:str]
            region: ENC[AES256_GCM,data:DfEVBSsHskpC,iv:4x2G8GcemMsbJJBAru8TBm4S2CD2nsBB4D94q8Ym9lE=,tag:UuJsK/3M/0/4WHhAu4VDRA==,type:str]
            accessKeyId: ENC[AES256_GCM,data:rfv/Fq6BbNHrzurfSAp2keeZx7A=,iv:XFAyDodRMXovsKoJJHMVHuxAgKazMmFVK+2cQ6CNRKA=,tag:V9/DYOYgGhwymc1Cfm95XA==,type:str]
            secretAccessKey: ENC[AES256_GCM,data:/882npl4N054wTa7VnKbXgRmZUhAJv4BnzcfOYQ/lFKnTWL3pJZJ4g==,iv:Q3Yc4yUNNwwYtPCIacHcWaBGxEqXZKm3FIazbPX4jd4=,tag:0gY0m4cIblE2rERyotjLMg==,type:str]
            signatureVersion: ENC[AES256_GCM,data:gas=,iv:6oflwFwekIes0e8xhwMVfgmfd/Ww1cPCCHlEsfQ612w=,tag:D/3QIsh2KJm1z0Ehi6OO/Q==,type:str]
            s3ForcePathStyle: ENC[AES256_GCM,data:a/L9Ow==,iv:JmuVX71ha5Mc5m82outjh6eA7d6+Q/vjjs91ygyih6g=,tag:DAvJnrYccpIlpGUo4ZkOKA==,type:bool]
            insecure: ENC[AES256_GCM,data:GqTsAg==,iv:/vmM1yuppZCb1Xv+asy2FrQ/B/Yv1Q6TuRehGI9zVOM=,tag:DCy/C7YFiPc6QT6nQMn7qw==,type:bool]
            http_config: {}
        limits_config:
            # Add retention period
            retention_period: 720h
            # Consider other limits
            max_query_parallelism: 128
            max_query_length: 721h
            max_streams_per_user: 10000
ingester:
    lifecycler:
        ring:
            replication_factor: 3
        ingester:
            chunk_encoding: snappy
        querier:
            max_concurrent: 4
        compactor:
            working_directory: /var/loki/compactor
            compaction_interval: 10m
            retention_enabled: true
            retention_delete_delay: 2h
            delete_request_store: s3
        query_scheduler:
            max_outstanding_requests_per_tenant: 4096
        table_manager:
            poll_interval: 2m
            creation_grace_period: 10m
            cache_table_names: true
compactor:
    persistence:
        enabled: true
        mountPath: /var/loki/compactor
        accessModes:
            - ReadWriteOnce
        size: 20Gi
        storageClass: ceph-block
deploymentMode: SimpleScalable
lokiCanary:
    enabled: true
backend:
    replicas: 2
read:
    replicas: 2
write:
    replicas: 3
minio:
    enabled: false
gateway:
    auth:
        enabled: false
        service:
            type: LoadBalancer
tracing:
    enabled: true
sops:
    age:
        - recipient: age18ynkp4xzwas6la23fvs5zhxazvqf7p3qw4vv26a346e8340gegfqh9c87h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBOaGF6SE1PbG9sYzlYZzdC
            NnFUc2loOWJzbzJROGhRby9Yb0hEbG9UUnc4CnEwWGc2U1dESmdpUU0xYVBCcHEy
            bkdpSWplamVFWFpnY2xlUjRwTTg3SkUKLS0tIGVEcEF6UDlLTUdzbk83Q2p0K2FO
            RU9MaXZ6N3B5RGlZeXE4WnBGV2hNQUkKxSHWQ+EaXU0kc3j+A3IA7bzuwd1L9NtM
            Z6BPZQuvnxTCrJDyYv5qpplsDOXcBRAmuNFsjMKykG7n/W/CvTX1mQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-05-15T08:17:19Z"
    mac: ENC[AES256_GCM,data:f+btswWkU+bbvK4FeKhez49dAEkFzpj3YQGvJxYZa8fJCOkPq6zV7sZSJzBZBmcwIJL20TA/vpMd2CqzTLiqxa1/fb4XLNirf+gWgKOdaY4FTeb+7DACZwS0iYI+24I5EMTAFSGPG7qYmbgvs23dkg3kTXznuYv8WsvfeUEhtIk=,iv:5MYzddA4LE241a2FP0Mg/HO3xEIhzbwu4yeSTKV2Pfo=,tag:XjxyqlQ2wcdbmOQLaZompQ==,type:str]
    encrypted_regex: ^(data|stringData|.*[Ss]ecret.*|.*[Kk]ey.*|.*[Pp]assword.*|.*[Tt]oken.*|s3)$
    mac_only_encrypted: true
    version: 3.10.2
