loki:
  server:
    http_server_config:
      auth_enabled: false
    schemaConfig:
      configs:
        - from: "2024-04-01"
          store: tsdb
          object_store: s3
          schema: v13
          index:
            prefix: loki_index_
            period: 24h
    storage:
      type: s3
      bucketNames:
        chunks: ceph-chunks
        ruler: ceph-ruler
        admin: ceph-admin
      s3:
        endpoint: ENC[AES256_GCM,data:ba86i6NAvDlHYqegJYJ0/86KqleaRO4+VyrMqsK4Lo+dUJQ4PtY3W8zM5azLI6/gtZeijHcYyWF0nLlKVhFlMEk=,iv:rcVYd8MRg5ZUNGKLnXy8OywngW9Qo0e6o+MNUgTZOy0=,tag:slsKgHR7cn3PEpRyUge/yA==,type:str]
        region: ENC[AES256_GCM,data:Sd9HclBrI2PE,iv:0YN5O5vBsLWn/KR9jOahWYWAfVVjkQXYZ+OgFNMz8Sc=,tag:N+gMF3ec+YxANBUSpztfcw==,type:str]
        accessKeyId: ENC[AES256_GCM,data:y/yXU7IXa9zNlYTDBP/ZJgwKJoo=,iv:wzi7axGw4BCrjNtDan8IUPQdQG2B5Me6CazS51HEUu4=,tag:OV+WsQQWPOn5jUZjmj9Wxg==,type:str]
        secretAccessKey: ENC[AES256_GCM,data:YwyD7WJ1n6ctYOcrJyiqf/HftuLBB2E7wIXRvw6wCBmpxYJv20Uiaw==,iv:ZZMx4CgQI7MIPBWA5jYctl8Px0VHf+wqNxwhCw3dAYo=,tag:hQP4GkXw61MFSZyL7XqpnQ==,type:str]
        signatureVersion: ENC[AES256_GCM,data:uUs=,iv:a0+HfcFupJwAv65APC8vv7k4o+l54d6jW92t3uxgO7Q=,tag:uACDnJpIUySBaYzLh3tFDA==,type:str]
        s3ForcePathStyle: ENC[AES256_GCM,data:EgianA==,iv:YycbyYrq3kZOKFZbEP8QaCu0rXHvnxxieydTXQthV8w=,tag:Q7eI+INWkcERG/Qou8i6+w==,type:bool]
        insecure: ENC[AES256_GCM,data:IqoGnw==,iv:Gwdkh8ehlBLwA5wmf7BjBq1drppW1vLl3KPK2tO3IrA=,tag:l4CqYqcguzgTeAOJSNbSCg==,type:bool]
        http_config: {}
    limits_config:
      # Add retention period
      retention_period: 720h
      # Consider other limits
      max_query_parallelism: 128
      max_query_length: 721h
      max_streams_per_user: 10000
    ingester:
      chunk_encoding: snappy
    querier:
      max_concurrent: 4
    compactor:
      working_directory: /var/loki/compactor
      compaction_interval: 10m
      retention_enabled: true
      retention_delete_delay: 2h
      delete_request_store: s3
    query_scheduler:
      max_outstanding_requests_per_tenant: 4096
    table_manager:
      poll_interval: 2m
      creation_grace_period: 10m
      cache_table_names: true
ingester:
  lifecycler:
    ring:
      replication_factor: 3
compactor:
  persistence:
    enabled: true
    mountPath: /var/loki/compactor
    accessModes:
      - ReadWriteOnce
    size: 20Gi
    storageClass: ceph-block
deploymentMode: SimpleScalable
lokiCanary:
  enabled: true
backend:
  replicas: 2
read:
  replicas: 2
write:
  replicas: 3
minio:
  enabled: false
gateway:
  auth:
    enabled: false
  service:
    type: LoadBalancer
tracing:
  enabled: true
sops:
  age:
    - recipient: age18ynkp4xzwas6la23fvs5zhxazvqf7p3qw4vv26a346e8340gegfqh9c87h
      enc: |
        -----BEGIN AGE ENCRYPTED FILE-----
        YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBCMTZWemFIWW9XMTFCTXVD
        cDh3R3RKNmhQc0xuUG4yUGN4Y0tKVzJZaEFZCm9KODc1ZDEzbUUrckZRQjRUc3Ez
        c0piaFQ0TlBUZGFXS1FWSThDQTBUUE0KLS0tIDR4eTV0VTB6enlKQ0FFZCs4cy9H
        Njh2MVRwNDUyL2sxQWRyMmJyZ0tWRkUK8+FJPtOZQszdFIhkmnD2hy3AT+imMwIG
        +5AMkxmmzOeh9ssI3qB4UzbkMFJWC8yP8+df2jMM+FJ6qhi3WdpcYw==
        -----END AGE ENCRYPTED FILE-----
  lastmodified: "2025-05-17T12:44:27Z"
  mac: ENC[AES256_GCM,data:DVRm49cmZhLkhNx4IWNwnFnRAmRxDOIW7xC++22rZ/GYXMO9A11VffbPt4GPhYwXNJAor6NPNLuhfbC7/OqUmwHrp5OUYAl/5aHrka3/B0YCMTlPExMqBGkRsdYZRJTU8QZjuHqf9RiNV3ZcziJLjoWRc44mH01sP/6RMLkyt1A=,iv:kz5eBXzC8F7ic15KFJ5ljycbq4uWMNJ8boso3QxsbNU=,tag:KQg+owC4WPnZLFiqaBoHfg==,type:str]
  encrypted_regex: ^(data|stringData|.*[Ss]ecret.*|.*[Kk]ey.*|.*[Pp]assword.*|.*[Tt]oken.*|s3)$
  mac_only_encrypted: true
  version: 3.10.2
