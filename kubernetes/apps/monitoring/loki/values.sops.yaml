global:
  clusterDomain: cluster.local
deploymentMode: SimpleScalable
loki:
  auth_enabled: false
  memberlist:
    join_members:
      - dns+loki-memberlist.monitoring.svc:7946
    bind_port: 7946
    gossip_interval: 200ms
    gossip_nodes: 3
    gossip_to_the_dead_time: 30s
  server:
    log_level: debug
  schemaConfig:
    configs:
      - from: "2024-04-01"
        store: tsdb
        object_store: s3
        schema: v13
        index:
          prefix: loki_index_
          period: 24h
  storage:
    type: s3
    bucketNames:
      chunks: ceph-chunks
    s3:
      bucket: ENC[AES256_GCM,data:t94Fwq8ZO4GzpDA=,iv:M/5dlaH87lOAsZw0XtOnzBoDDgChDPubtTkK5f8dA/U=,tag:WG7es2LQPHRJNv4a8qyBJQ==,type:str]
      endpoint: ENC[AES256_GCM,data:1MYQ/kDKXR8QR48ixVXyY3vFFS8IKHB6UaA8KDWA8JssPmECR0Vui1fcMmjJ/A7ZtZCa+CAeLhgSPSUun9CJzzvI,iv:g6gnhoWY98atM3dthPnG/pmKl/ZPFnx0dxJvWYmJCJM=,tag:my2gV40o+inHfnv7J2U/3A==,type:str]
      signature_version: ENC[AES256_GCM,data:PmY=,iv:nzEZQpNLnGkFYBBlSf6ofv+rf0mqgKV6Vx6Lefr+yAI=,tag:G3MvgFQOs16Do2I+k1mF5w==,type:str]
      s3forcepathstyle: ENC[AES256_GCM,data:ReX8jQ==,iv:qUpmljicblRXse379HTd6soAeTFn8AnMA85DAG0rXwM=,tag:2jmQUNmNh/1lUbCwJ+aHJg==,type:bool]
      insecure: ENC[AES256_GCM,data:HZHmavE=,iv:3SQjlSPK+Zstz2H/yi1R1ZoU2ZP3FsQ0Xuwz/j65L+Q=,tag:xxwqhHC9x/dCHIKk6bjhmQ==,type:bool]
      http_config: {}
  limits_config:
    retention_period: 720h
    max_query_parallelism: 128
    max_query_length: 721h
    max_streams_per_user: 10000
    ingestion_rate_mb: 15
    ingestion_burst_size_mb: 30
    # 5 MiB
    max_line_size: 5242880
  ingester:
    chunk_encoding: snappy
  querier:
    max_concurrent: 4
  compactor:
    working_directory: /var/loki/compactor
    compaction_interval: 10m
    retention_enabled: true
    retention_delete_delay: 2h
    delete_request_store: s3
    delete_request_cancel_period: 24h
  query_scheduler:
    max_outstanding_requests_per_tenant: 4096
  table_manager:
    poll_interval: 2m
    creation_grace_period: 10m
    cache_table_names: true
ingester:
  lifecycler:
    ring:
      replication_factor: 3
compactor:
  persistence:
    enabled: true
    mountPath: /var/loki/compactor
    accessModes:
      - ENC[AES256_GCM,data:t4BO6md2Qk56Ntowyg==,iv:2ZZdqvd5iBhHUSyq1W0wntxy/CQA+H7zcM9RGNMPXRE=,tag:AtakVPm6FJ2mgnxicQD5mQ==,type:str]
    size: 20Gi
    storageClass: ceph-block
backend:
  replicas: 3
  extraEnv:
    - name: AWS_ACCESS_KEY_ID
      valueFrom:
        secretKeyRef:
          name: ENC[AES256_GCM,data:ZxW1/W4j0dTeXtFTRg==,iv:Ef7xRqqscks540AARqZ+HjrJL7V1BkhHJLKPuglShFQ=,tag:cLiZNGXU+4OagoPJl5XNHg==,type:str]
          key: ENC[AES256_GCM,data:qSBaboU/lWsvaPq6NKkPMik=,iv:upgYKTRw+xk3DzuXNKQDgbbk6a5IwK2P3jjZRQz7cMA=,tag:rCpCvouh9cs0UESmedID1Q==,type:str]
    - name: AWS_SECRET_ACCESS_KEY
      valueFrom:
        secretKeyRef:
          name: ENC[AES256_GCM,data:7dD9qZzp3JgzaGDikQ==,iv:EUpmSCn+HgNrLo2z6Gyy7dZhBAW1a81993UgOIMySVQ=,tag:Qm0Kf4R9oPPHc1pH3golFw==,type:str]
          key: ENC[AES256_GCM,data:7ctiNANItacQX3ox8L8a/+Robqxv,iv:774p35da6exjPwd5beorv3RjMsNLOhRnEFNSQvV+rMM=,tag:MceR++RjR9StoSr+Qt+PiQ==,type:str]
read:
  replicas: 3
  extraEnv:
    - name: AWS_ACCESS_KEY_ID
      valueFrom:
        secretKeyRef:
          name: ENC[AES256_GCM,data:qoiXkT3VPv33n6UPMQ==,iv:Owjh1+ytBgPg6z3Qf7zdf0kgzW9bw/a/xHFU2M8qRUE=,tag:lkqgvBZb9WN3LJaSoYDnOw==,type:str]
          key: ENC[AES256_GCM,data:lYgc/KJym0+RO5yCfJuMep8=,iv:4gjQ5fqZeCObJS183FbLG55rWothoHi5F495fb1ayRI=,tag:lNHI38FpzwE+FbHYOn000A==,type:str]
    - name: AWS_SECRET_ACCESS_KEY
      valueFrom:
        secretKeyRef:
          name: ENC[AES256_GCM,data:U4w87o3fAZHkSlRH6g==,iv:huSYRYsPfG+G1Y6DRkmjErh6VxgFJaysvRgkO8dkVNE=,tag:3GOpd99oIQUn7teFfCfmPQ==,type:str]
          key: ENC[AES256_GCM,data:nqUfekMFZSrjGPWX2uRIAl8fOvVt,iv:JPyVh7y9fWUHqXksxEYzQG1UPEB0iyc21Vb1nMGOTgA=,tag:+V92rHeRXAVMFvUFy5dXBQ==,type:str]
write:
  replicas: 3
  extraEnv:
    - name: AWS_ACCESS_KEY_ID
      valueFrom:
        secretKeyRef:
          name: ENC[AES256_GCM,data:gEDZHw7oySmsmcxH3A==,iv:ktg+a8X7XA4Z/jHwqbcGYCxXGyd5Ma93Beg9ccVlim8=,tag:cR9n8ce+c/vURwFmQDtgng==,type:str]
          key: ENC[AES256_GCM,data:NOgfh5HDtkpggZik1MIlcRw=,iv:6fN/MlypeoxcWN0/lrYnPtYmRVGmZOPt+HPB1N0hMqE=,tag:2laX9cGJVx+uLW+yh+xI+g==,type:str]
    - name: AWS_SECRET_ACCESS_KEY
      valueFrom:
        secretKeyRef:
          name: ENC[AES256_GCM,data:ePPVAkbG7vdBSDydig==,iv:ZOUKZYVKjS3Gh1fl4lXAL3ZU+diKoZ7m5bQBtAYLL7U=,tag:O76u0fdAOfy4FNuK8w8beQ==,type:str]
          key: ENC[AES256_GCM,data:XA8LgZPL8OOAmRzJXV4kM9Wh+VuB,iv:eM4rZeUuWF5zjK9A/IxOaIA3oSqshio1YxQbkdGhgxI=,tag:ZNhWwdLrBwvFMAISuVZy6A==,type:str]
gateway:
  auth:
    enabled: false
  service:
    type: LoadBalancer
lokiCanary:
  enabled: true
minio:
  enabled: false
tracing:
  enabled: true
sops:
  age:
    - recipient: age18ynkp4xzwas6la23fvs5zhxazvqf7p3qw4vv26a346e8340gegfqh9c87h
      enc: |
        -----BEGIN AGE ENCRYPTED FILE-----
        YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA4eGxaaHdlaG5kUm4zZWF1
        K1lVdGRIMXhPNjNkNlViakZ4UU9WRFhEUngwCkNkb2hQTEFjb1NsQmk0OUtMVzgv
        S3pTMjNxTkZtOHhsVUszUGozU29STmcKLS0tIEpmelVEaFJuSW1YaWtxSm1ISktI
        ZFF6dFR3TjVZckdKaFIxb2RxdEdNN2sKzsYFht9HYZylXxaWEqT5wsDueUwDQCRn
        RJetF1rJu7+cgpRuEoeqY4PP6ZYrALii6r/O9Ik8569E9x8OuYmO4Q==
        -----END AGE ENCRYPTED FILE-----
  lastmodified: "2025-05-18T02:06:57Z"
  mac: ENC[AES256_GCM,data:V2rFxSvkYixv/uH/WXHfreKzd/Jimf/REJrJMfHd7Fjim9pCI4zE6Y2DNW6Dwt/dQB3cS8zAWmyJUWtxCymtjZY5dT5/IsKJe/2ZClmFAL1OOfwx4ViJ7N5OrsO14niUDjT5E/O+mOKlCCYShvh9yegcMULsrhfQGF8CWEWkIvQ=,iv:Emf15AIrxQtRknyrMWY1gn/vqrZ3ub7kdaA2eksmA8c=,tag:eI1qSJXhwVxYgRVba0dU9w==,type:str]
  encrypted_regex: ^(data|stringData|.*[Ss]ecret.*|.*[Kk]ey.*|.*[Pp]assword.*|.*[Tt]oken.*|.*access.*|s3.*)$
  mac_only_encrypted: true
  version: 3.10.2
