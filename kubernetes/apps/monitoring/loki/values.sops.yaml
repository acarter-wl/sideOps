compactor:
  persistence:
    enabled: true
    mountPath: /var/loki/compactor
    accessModes:
      - ReadWriteOnce
    size: 20Gi
    storageClass: ceph-block
loki:
  schemaConfig:
    configs:
      - from: "2024-04-01"
        store: tsdb
        object_store: s3
        schema: v13
        index:
          prefix: loki_index_
          period: 24h
  storage:
    type: s3
    bucketNames:
      chunks: ceph-chunks
      ruler: ceph-ruler
      admin: ceph-admin
    s3:
      endpoint: ENC[AES256_GCM,data:AT8HsemGLAqmcXePZ2wsv1TU1gH7EJ6qN2vEs5DX8dGvQO2Af5O1Ttjh5nBHgpgzFHi+7+hCzcl2emsYrw9hXNM=,iv:CZx9kBNv/iwaxtiRpQ7iFz9dt08pNKlXE3VBZSBFaxA=,tag:FaS660tbavTyKh8i1/ozOg==,type:str]
      region: ENC[AES256_GCM,data:6zjzR+36jA0g,iv:R1Tio5Tg1feEMhR71UsDpIB7zeviJ8VL3JY0tABw0zM=,tag:gdYDaIpUFUgYn+JJTxuceA==,type:str]
      accessKeyId: ENC[AES256_GCM,data:tUCe1ebTZy7VZSmfZYrNdbEBEzY=,iv:PBYFzmHLXMtLEHcm3QoyrHC11HXn4IqTNNulE6aRcC0=,tag:PIjsbWxsZwIQRRDMega2ew==,type:str]
      secretAccessKey: ENC[AES256_GCM,data:3P2OQqTcDVD3MadyfbEz2VSsARNerEXvWy1VxJtGGILvZoQ0qO11sQ==,iv:1q7nd+q4MYxpD5DJD4LWNKR9HMvDCm1zon0+u0fgNFw=,tag:xoyVLzVoWKsWQhQJaFvx/Q==,type:str]
      signatureVersion: ENC[AES256_GCM,data:ygA=,iv:djcSioIRIKsdXLUwXq8xU73tZalYKbx7TaNgXlbX0Pk=,tag:aSF1Y8kybr6iXF/JjTe5NQ==,type:str]
      s3ForcePathStyle: ENC[AES256_GCM,data:sNdbbw==,iv:pES22tV28Kmqjd4eP1u0Xvy9VUeYPXK1SXQvz18jooE=,tag:OQof6PeEuebl1C1GYo15hg==,type:bool]
      insecure: ENC[AES256_GCM,data:pKvYXQ==,iv:IhQl7fjzEdMg7UgV2BsqXKRG3PBMWJpJGMWli+GGMNk=,tag:hMze1cZIYbHEk26kHbwtDw==,type:bool]
      http_config: {}
  limits_config:
    allow_structured_metadata: true
  ingester:
    chunk_encoding: snappy
  querier:
    max_concurrent: 4
  compactor:
    working_directory: /var/loki/compactor
    compaction_interval: 10m
    retention_enabled: true
    retention_delete_delay: 2h
    delete_request_store: s3
  query_scheduler:
    max_outstanding_requests_per_tenant: 4096
  table_manager:
    poll_interval: 2m
    creation_grace_period: 10m
    cache_table_names: true
deploymentMode: SimpleScalable
lokiCanary:
  enabled: false
backend:
  replicas: 2
read:
  replicas: 2
write:
  replicas: 3
minio:
  enabled: false
gateway:
  service:
    type: LoadBalancer
tracing:
  enabled: true
sops:
  age:
    - recipient: age18ynkp4xzwas6la23fvs5zhxazvqf7p3qw4vv26a346e8340gegfqh9c87h
      enc: |
        -----BEGIN AGE ENCRYPTED FILE-----
        YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBreC9lM3JEc3hldW5IV3NQ
        TE1WT2NUWmZxaUtFdFRWZTAyWDlma2tmaGtFCm96cS9QSFUwMWdxTFJBNDRtNjZn
        RjFldWJhRjVvQmZxNkVzNWNHWmYzeHcKLS0tIDluQ2tKdWZ4OUdqdUVhMUhqZ2FE
        YlJZZUdwK0hjbjJ5RXQrejM5RVNMck0KzQ2d2Ce2GngLKH19Z2J1lehBoblUW6zL
        k+AZRgC8tgHiiyQp6VpDQiOYcQWlDe5SziNgmPinjccMLKPxADpA+g==
        -----END AGE ENCRYPTED FILE-----
  lastmodified: "2025-05-15T07:24:08Z"
  mac: ENC[AES256_GCM,data:T3DpCBksHi1Dy8Kl4mw4lkkZf3VRlLIKrEpUOOL3MKgv80WyB6eNTzjTrObSSUpDepBEaJ9n8YQMUCWADC9zeOfKVpyCDWVSRpKPSiwOKuvGfyPBjiHj+AzIufXGX/bjDvB4XrXoZZjgFy1EoNjOmdm4owtjJLvWQYUPf/A8wuI=,iv:l8BdEc+/WB4pme+2C6AK0vIXaBjHUPw8HhYM1IFUuyU=,tag:GggOM4GURVBcTCL8sGtRtw==,type:str]
  encrypted_regex: ^(data|stringData|.*[Ss]ecret.*|.*[Kk]ey.*|.*[Pp]assword.*|.*[Tt]oken.*|s3)$
  mac_only_encrypted: true
  version: 3.10.2
