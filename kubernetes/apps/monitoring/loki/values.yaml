loki:
  structuredConfig:
    common:
      storage:
        s3:
          endpoint: http://rook-ceph-rgw-ceph-objectstore.rook-ceph.svc/ceph-chunks
          region: us-east-1
          access_key_id: ${AWS_ACCESS_KEY_ID}
          secret_access_key: ${AWS_SECRET_ACCESS_KEY}
          s3forcepathstyle: true
          insecure: true

    compactor:
      working_directory: /var/loki/compactor
      shared_store: s3
      retention_enabled: true

    schema_config:
      configs:
        - from: 2020-05-15
          store: tsdb
          object_store: s3
          schema: v13
          index:
            prefix: index_
            period: 24h

    memberlist:
      join_members:
        - loki-memberlist

  persistence:
    enabled: true
    size: 20Gi
    storageClassName: ceph-block

  service:
    port: 3100

  resources:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 100m
      memory: 128Mi
