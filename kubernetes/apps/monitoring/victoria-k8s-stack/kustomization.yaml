apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ./config

#   - dashboards/cephfs-overview.json
generatorOptions:
  disableNameSuffixHash: true

configMapGenerator:
  - name: ceph-overview
    namespace: monitoring
    files:
      - dashboards/ceph-overview.json

  - name: ceph-pools
    namespace: monitoring
    files:
      - dashboards/ceph-pools.json

  - name: ceph-osds
    namespace: monitoring
    files:
      - dashboards/ceph-osds.json

  - name: argo-cd-application-overview
    namespace: monitoring
    files:
      - dashboards/argo-cd-application-overview.json

  - name: argo-cd-notifications-overview
    namespace: monitoring
    files:
      - dashboards/argo-cd-notifications-overview.json

  - name: argo-cd-operational-overview
    namespace: monitoring
    files:
      - dashboards/argo-cd-operational-overview.json

  - name: ceph-cluster-advanced
    namespace: monitoring
    files:
      - dashboards/ceph-cluster-advanced.json

#   - name: pool-detail
#     namespace: monitoring
#     files:
#       - dashboards/pool-detail.json
#   - name: rbd-overview
#     namespace: monitoring
#     files:
#       - dashboards/rbd-overview.json

# patches:
#   - target:
#       kind: ConfigMap
#       name: cephfs-overview
#       namespace: monitoring
#     patch: |-
#       apiVersion: v1
#       kind: ConfigMap
#       metadata:
#         name: cephfs-overview
#         namespace: monitoring
#         labels:
#           grafana_dashboard: "1"
#           grafana_dashboard_uid: "cephfs-overview"
#           label: "ceph"
#   - target:
#       kind: ConfigMap
#       name: ceph-host
#       namespace: monitoring
#     patch: |-
#       apiVersion: v1
#       kind: ConfigMap
#       metadata:
#         name: ceph-host
#         namespace: monitoring
#         labels:
#           grafana_dashboard: "1"
#           grafana_dashboard_uid: "ceph-host"
#           label: "ceph"
#   - target:
#       kind: ConfigMap
#       name: ceph-cluster
#       namespace: monitoring
#     patch: |-
#       apiVersion: v1
#       kind: ConfigMap
#       metadata:
#         name: ceph-cluster
#         namespace: monitoring
#         labels:
#           grafana_dashboard: "1"
#           grafana_dashboard_uid: "ceph-cluster"
#           label: "ceph"
#   - target:
#       kind: ConfigMap
#       name: ceph-cluster-advanced
#       namespace: monitoring
#     patch: |-
#       apiVersion: v1
#       kind: ConfigMap
#       metadata:
#         name: ceph-cluster-advanced
#         namespace: monitoring
#         labels:
#           grafana_dashboard: "1"
#           grafana_dashboard_uid: "ceph-cluster-advanced"
#           label: "ceph"
#   - target:
#       kind: ConfigMap
#       name: osd-device-overview
#       namespace: monitoring
#     patch: |-
#       apiVersion: v1
#       kind: ConfigMap
#       metadata:
#         name: osd-device-overview
#         namespace: monitoring
#         labels:
#           grafana_dashboard: "1"
#           grafana_dashboard_uid: "osd-device-overview"
#           label: "ceph"
#   - target:
#       kind: ConfigMap
#       name: osds-overview
#       namespace: monitoring
#     patch: |-
#       apiVersion: v1
#       kind: ConfigMap
#       metadata:
#         name: osds-overview
#         namespace: monitoring
#         labels:
#           grafana_dashboard: "1"
#           grafana_dashboard_uid: "osds-overview"
#           label: "ceph"
#   - target:
#       kind: ConfigMap
#       name: pool-detail
#       namespace: monitoring
#     patch: |-
#       apiVersion: v1
#       kind: ConfigMap
#       metadata:
#         name: pool-detail
#         namespace: monitoring
#         labels:
#           grafana_dashboard: "1"
#           grafana_dashboard_uid: "pool-detail"
#           label: "ceph"
#   - target:
#       kind: ConfigMap
#       name: rbd-overview
#       namespace: monitoring
#     patch: |-
#       apiVersion: v1
#       kind: ConfigMap
#       metadata:
#         name: rbd-overview
#         namespace: monitoring
#         labels:
#           grafana_dashboard: "1"
#           grafana_dashboard_uid: "rbd-overview"
#           label: "ceph"

# # To add more dashboards with unique labels, add another configMapGenerator entry and a corresponding patch block above.
