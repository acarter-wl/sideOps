# podAnnotations:
#   fluentbit.io/exclude: 'true'

# extraPorts:
# - port: 12345
#   containerPort: 12345
#   protocol: TCP
#   name: talos

# config:
#   service: |
#     [SERVICE]
#       Flush         5
#       Daemon        Off
#       Log_Level     warn
#       Parsers_File  custom_parsers.conf

#   inputs: |
#     [INPUT]
#       Name          tcp
#       Listen        0.0.0.0
#       Port          12345
#       Format        json
#       Tag           talos.*

#     [INPUT]
#       Name          tail
#       Alias         kubernetes
#       Path          /var/log/containers/*.log
#       Parser        containerd
#       Tag           kubernetes.*

#     [INPUT]
#       Name          tail
#       Alias         audit
#       Path          /var/log/audit/kube/*.log
#       Parser        audit
#       Tag           audit.*

#   filters: |
#     [FILTER]
#       Name                kubernetes
#       Alias               kubernetes
#       Match               kubernetes.*
#       Kube_Tag_Prefix     kubernetes.var.log.containers.
#       Use_Kubelet         Off
#       Merge_Log           On
#       Merge_Log_Trim      On
#       Keep_Log            Off
#       K8S-Logging.Parser  Off
#       K8S-Logging.Exclude On
#       Annotations         Off
#       Labels              On

#     [FILTER]
#       Name          modify
#       Match         kubernetes.*
#       Add           source kubernetes
#       Remove        logtag

#   customParsers: |
#     [PARSER]
#       Name          audit
#       Format        json
#       Time_Key      requestReceivedTimestamp
#       Time_Format   %Y-%m-%dT%H:%M:%S.%L%z

#     [PARSER]
#       Name          containerd
#       Format        regex
#       Regex         ^(?<time>[^ ]+) (?<stream>stdout|stderr) (?<logtag>[^ ]*) (?<log>.*)$
#       Time_Key      time
#       Time_Format   %Y-%m-%dT%H:%M:%S.%L%z

#   outputs: |
#     [OUTPUT]
#       Name    stdout
#       Alias   stdout
#       Match   *
#       Format  json_lines
#   # If you wish to ship directly to Loki from Fluentbit,
#   # Uncomment the following output, updating the Host with your Loki DNS/IP info as necessary.
#   # [OUTPUT]
#   # Name loki
#   # Match *
#   # Host loki.loki.svc
#   # Port 3100
#   # Labels job=fluentbit
#   # Auto_Kubernetes_Labels on

# daemonSetVolumes:
# - name: varlog
#   hostPath:
#     path: /var/log

# daemonSetVolumeMounts:
# - name: varlog
#   mountPath: /var/log

# tolerations:
# - operator: Exists
#   effect: NoSchedule

# # podAnnotations:
# #   fluentbit.io/exclude: 'true'

# # tolerations:
# # - operator: Exists
# #   effect: NoSchedule

# # readinessProbe:
# #   httpGet:
# #     path: /api/v1/health
# #     port: 2020
# #   initialDelaySeconds: 5
# #   periodSeconds: 10

# # metrics:
# #   enabled: true
# #   port: 2020
# #   path: /api/v1/health

# # config:
# #   service: |
# #     [SERVICE]
# #         Flush        5
# #         Daemon       Off
# #         Log_Level    warn
# #         Parsers_File /fluent-bit/etc/custom_parsers.conf
# #         HTTP_Server  On
# #         HTTP_Listen  0.0.0.0
# #         HTTP_Port    2020

# #   inputs: |
# #     [INPUT]
# #         Name              tail
# #         Path              /var/log/containers/*.log
# #         Parser            containerd
# #         Tag               kube.*
# #         Mem_Buf_Limit     5MB
# #         Skip_Long_Lines   On

# #     [INPUT]
# #         Name     tcp
# #         Listen   0.0.0.0
# #         Port     12345
# #         Format   json
# #         Tag      talos.*

# #   filters: |
# #     [FILTER]
# #         Name                kubernetes
# #         Match               kube.*
# #         Merge_Log           On
# #         Keep_Log            Off
# #         K8S-Logging.Parser  Off
# #         K8S-Logging.Exclude On

# #     [FILTER]
# #         Name   modify
# #         Match  kube.*
# #         Add    source kubernetes
# #         Remove logtag

# #   outputs: |
# #     [OUTPUT]
# #         Name               opensearch
# #         Match              *
# #         Host               opensearch-cluster-master
# #         Port               9200
# #         Index              fluent-bit
# #         Suppress_Type_Name On
# #         Logstash_Format    On
# #         Logstash_Prefix    logs
# #         Replace_Dots       On
# #         Retry_Limit        False
# #         tls                Off

# #   customParsers: |
# #     [PARSER]
# #         Name   containerd
# #         Format regex
# #         Regex  ^(?<time>[^ ]+) (?<stream>stdout|stderr) (?<logtag>[^ ]*) (?<log>.*)$
# #         Time_Key time
# #         Time_Format %Y-%m-%dT%H:%M:%S.%L%z

# # volumeMounts:
# # - name: varlog
# #   mountPath: /var/log
# # - name: docker-containers
# #   mountPath: /var/lib/docker/containers
# #   readOnly: true
# # - name: custom-parsers
# #   mountPath: /fluent-bit/etc/custom_parsers.conf
# #   subPath: custom_parsers.conf
# #   readOnly: true

# # volumes:
# # - name: varlog
# #   hostPath:
# #     path: /var/log
# # - name: docker-containers
# #   hostPath:
# #     path: /var/lib/docker/containers
# # - name: custom-parsers
# #   configMap:
# #     name: fluent-bit-custom-parsers
