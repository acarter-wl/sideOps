env:
  - name: S3_ACCESS_KEY
    valueFrom:
      secretKeyRef:
        name: mimir-s3
        key: S3_ACCESS_KEY
  - name: S3_SECRET_KEY
    valueFrom:
      secretKeyRef:
        name: mimir-s3
        key: S3_SECRET_KEY

blocks_storage:
  backend: s3
  s3:
    endpoint: http://rook-ceph-rgw-objectstore.rook-ceph.svc.cluster.local:80
    bucket_name: mimir-blocks
    access_key_id: ${S3_ACCESS_KEY}
    secret_access_key: ${S3_SECRET_KEY}
    insecure: true
    sse_encryption: false

alertmanager_storage:
  backend: s3
  s3:
    endpoint: http://rook-ceph-rgw-objectstore.rook-ceph.svc.cluster.local:80
    bucket_name: mimir-alertmanager
    access_key_id: ${S3_ACCESS_KEY}
    secret_access_key: ${S3_SECRET_KEY}
    insecure: true
    sse_encryption: false

ruler_storage:
  backend: s3
  s3:
    endpoint: http://rook-ceph-rgw-objectstore.rook-ceph.svc.cluster.local:80
    bucket_name: mimir-ruler
    access_key_id: ${S3_ACCESS_KEY}
    secret_access_key: ${S3_SECRET_KEY}
    insecure: true
    sse_encryption: false

ingester:
  wal:
    enabled: true

table_manager:
  retention_deletes_enabled: true
  retention_period: 2160h

ingester_limits:
  max_series_per_user: 1000000
  max_samples_per_user: 10000000

limits:
  max_global_series_per_user: 10000000
  max_global_samples_per_user: 100000000
  ingestion_rate: 1000000
  ingestion_burst_size: 2000000
  compactor_blocks_retention_period: 2160h

nginx:
  enabled: true
  service:
    type: ClusterIP
