apiVersion: velero.io/v1
kind: Schedule
metadata:
  name: daily-rook-ceph-backup
  namespace: velero
spec:
  schedule: "0 2 * * *"  # Run at 2 AM every day
  template:
    includedNamespaces:
      - "*"
    excludedNamespaces:
      - kube-system
      - velero       # Exclude velero itself
    includedResources:
      - "*"
    excludedResources:
      - metrics.k8s.io  # Exclude metrics
    labelSelector: {}
    snapshotVolumes: true  # Enable volume snapshots
    includeClusterResources: true  # Include cluster-scoped resources
    storageLocation: rook-ceph  # Use Rook-Ceph for short-term storage
    volumeSnapshotLocations:
      - csi-snapshots  # Use the CSI snapshot location
    ttl: "168h"
---
apiVersion: velero.io/v1
kind: Schedule
metadata:
  name: weekly-nfs-backup
  namespace: velero
spec:
  schedule: "0 1 * * 0"
  template:
    includedNamespaces:
      - "*"
    excludedNamespaces:
      - kube-system
      - velero
    includedResources:
      - "*"
    excludedResources:
      - metrics.k8s.io
    labelSelector: {}
    snapshotVolumes: false
    includeClusterResources: true
    storageLocation: nfs-restic
    ttl: "4320h"
