---
apiVersion: velero.io/v1
kind: Schedule
metadata:
  name: daily-s3-backup
  namespace: velero
spec:
  schedule: "0 0 * * *"  # Daily at midnight
  template:
    storageLocation: default
    ttl: 720h  # 30 days
    includedNamespaces:
    - "*"
    excludedNamespaces:
    - kube-system
    - velero
    includeClusterResources: true
---
apiVersion: velero.io/v1
kind: Schedule
metadata:
  name: weekly-nfs-backup
  namespace: velero
spec:
  schedule: "0 2 * * 0"  # Weekly on Sunday at 2:00 AM
  template:
    storageLocation: nfs-backup
    ttl: 1440h  # 60 days
    includedNamespaces:
    - "*"
    excludedNamespaces:
    - velero
    includeClusterResources: true
    defaultVolumesToRestic: true
    # Exclude a specific PVC using a label selector
    labelSelector:
      matchExpressions:
        - key: velero.io/exclude-pvc
          operator: NotIn
          values: ["true"]
    # The above selector will include all resources EXCEPT those with label velero.io/exclude-pvc=true
    # You can then label the PVC you want to exclude:
    # kubectl label pvc/your-pvc-name velero.io/exclude-pvc=true -n your-namespace
    
    # Alternative: exclude all PVCs (comment out if not using this approach)
    # excludedResources:
    # - persistentvolumeclaims
